<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panadería de Pan - Mi Cuenta</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body background="styles.css">
    <div class="container-fluid">
        <div class="row mb-3">
            <nav class="navbar navbar-expand-lg navbar-custom">
                <div class="container-fluid">
                    <a class="navbar-brand brand" href=""><img src="PanederiaDePanIcon.png" alt=""></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link " aria-current="page" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Nosotros</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Contacto</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="header">
                <div class="container" style="max-width: 600px; margin: 0 auto; padding: 20px;">
                    <h1 style="text-align: center; color: #C7EAF0;">Direcciones</h1>

                    <!-- Contenedor donde se añaden las tarjetas dinámicamente -->
                    <div id="address-container">
                        <!-- Ejemplo de una dirección inicial -->
                        <div class="card address-card mb-3 card-specific"
                            style="background-color: #FBE4D5; border-radius: 15px; padding: 20px; position: relative;">
                            <i class="fa-solid fa-credit-card icon-specific" style="color:#5D919C;margin-right: 500px;"></i>
                            <h3 style="color: #915D33;">Terminada en 1801</h3>
                            <p style="color: #6C6C6C;">Indicar banco</p>
                            <p style="color: #6C6C6C;">Vencimiento</p>

                    

                            <!-- Menú desplegable (formulario dentro de la tarjeta) -->
                            <div class="form-popup"
                                style="display: none; margin-top: 10px; background-color: #fff; padding: 10px; border: 1px solid #ccc; border-radius: 10px;">
                                <form>
                                    <input type="text" placeholder="Nombre Completo" class="form-control mb-2" required>
                                    <input type="text" placeholder="Código Postal" class="form-control mb-2" required>
                                    <input type="text" placeholder="Estado" class="form-control mb-2" required>
                                    <input type="text" placeholder="Municipio" class="form-control mb-2" required>
                                    <input type="text" placeholder="Colonia" class="form-control mb-2" required>
                                    <input type="text" placeholder="Calle y Número" class="form-control mb-2" required>
                                    <input type="text" placeholder="Teléfono de Contacto" class="form-control mb-2"
                                        required>
                                    <textarea placeholder="Indicaciones adicionales"
                                        class="form-control mb-2"></textarea>
                                    <button type="submit" class="btn btn-primary"
                                        style="background-color: #915D33; border: none;">Guardar</button>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div id="add-form-popup" class="form-popup"
                style="display: none; background-color: #fff; padding: 20px; border: 1px solid #ccc; border-radius: 10px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; width: auto; max-width: 90%; margin-left: 420px; margin-top: 40px;">
                <h3 style="text-align: center; color: #915D33;">Agregar Nueva Dirección</h3>
                <form id="add-address-form" onsubmit="addNewAddress(event)">
                    <input type="text" placeholder="Nombre Completo" class="form-control mb-2" required>
                    <input type="text" placeholder="Código Postal" class="form-control mb-2" required>
                    <input type="text" placeholder="Estado" class="form-control mb-2" required>
                    <input type="text" placeholder="Municipio" class="form-control mb-2" required>
                    <input type="text" placeholder="Colonia" class="form-control mb-2" required>
                    <input type="text" placeholder="Calle y Número" class="form-control mb-2" required>
                    <input type="text" placeholder="Teléfono de Contacto" class="form-control mb-2" required>
                    <textarea placeholder="Indicaciones adicionales" class="form-control mb-2"></textarea>
                    <button type="submit" class="btn btn-primary"
                        style="background-color: #915D33;
                        border: none;
                        border-radius: 8px;
                        color: white;
                        padding: 8px 16px;
                        font-size: 14px;
                        width: auto;
                        display: inline-block;
                        margin: 0 auto; /* Centra el botón si es necesario */">Guardar</button>
                    <button type="button" class="btn btn-secondary" style="background-color: #915D33;
                    border: none;
                    border-radius: 8px;
                    color: white;
                    padding: 8px 16px;
                    font-size: 14px;
                    width: auto;
                    display: inline-block;
                    margin: 0 auto; /* Centra el botón si es necesario */"
                        onclick="toggleAddForm()">Cancelar</button>
                </form>
            </div>

            <button id="add-address-btn" class="btn btn-primary">
                Agregar Dirección
            </button>

        </div>

        <!-- JavaScript para abrir y cerrar el formulario -->
        <script>
            function toggleAddForm() {
                const formPopup = document.getElementById("add-form-popup");
                formPopup.style.display = formPopup.style.display === "block" ? "none" : "block";
            }

            // Manejador para el botón "Agregar Dirección"
            document.getElementById("add-address-btn").addEventListener("click", toggleAddForm);

            // Función para guardar la nueva dirección
            function addNewAddress(event) {
                event.preventDefault(); // Evita que se recargue la página

                // Obtén los valores del formulario
                const form = document.getElementById("add-address-form");
                const inputs = form.querySelectorAll("input, textarea");
                const values = Array.from(inputs).map(input => input.value);

                // Crear una nueva tarjeta con los datos del formulario
                const newCard = document.createElement("div");
                newCard.className = "card address-card mb-3";
                newCard.style = "background-color: #FBE4D5; border-radius: 15px; padding: 20px;";

                newCard.innerHTML = `
            <h3 style="color: #915D33;">${values[5]}</h3>
            <p style="color: #6C6C6C;">Código postal: ${values[1]} - Estado: ${values[2]} - Municipio: ${values[3]}</p>
            <p style="color: #6C6C6C;">${values[0]} - Teléfono: ${values[6]}</p>
            <button class="btn btn-secondary" style="background-color: #915D33; border: none; margin-top: 10px;" onclick="toggleForm(this)">
                Editar Dirección
            </button>
        `;

                // Añadir la nueva tarjeta al contenedor
                const container = document.getElementById("address-container");
                container.appendChild(newCard);

                // Limpiar el formulario y ocultarlo
                form.reset();
                toggleAddForm();
            }

            function abrirFormulario() {
                document.getElementById('overlay').style.display = 'block';
            }

            function cerrarFormulario() {
                document.getElementById('overlay').style.display = 'none';
            }

            function guardarDireccion() {
                const container = document.getElementById('address-container');
                const form = document.getElementById('new-address-form');

                // Extraer valores del formulario
                const newCard = `
                <div class="card address-card mb-3" style="background-color: #FBE4D5; border-radius: 15px; padding: 20px;">
                    <h3 style="color: #915D33;">${form[0].value}</h3>
                    <p style="color: #6C6C6C;">Código postal ${form[1].value} - ${form[2].value} - ${form[3].value}</p>
                    <p style="color: #6C6C6C;">${form[4].value} - ${form[5].value}</p>
                </div>
            `;
                container.innerHTML += newCard;

                cerrarFormulario();
                form.reset();
            }
            function toggleForm(button) {
                // Encuentra el contenedor del formulario relacionado
                const formPopup = button.nextElementSibling;

                // Cambia entre mostrar y ocultar el formulario
                if (formPopup.style.display === "none" || formPopup.style.display === "") {
                    formPopup.style.display = "block";
                } else {
                    formPopup.style.display = "none";
                }
            }
        </script>
</body>

</html>